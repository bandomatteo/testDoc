<!DOCTYPE html><html lang="en" style="font-size:16px"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Global</title><!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]--><script src="scripts/third-party/hljs.js" defer="defer"></script><script src="scripts/third-party/hljs-line-num.js" defer="defer"></script><script src="scripts/third-party/popper.js" defer="defer"></script><script src="scripts/third-party/tippy.js" defer="defer"></script><script src="scripts/third-party/tocbot.min.js"></script><script>var baseURL="/",locationPathname="";baseURL=(locationPathname=document.location.pathname).substr(0,locationPathname.lastIndexOf("/")+1)</script><link rel="stylesheet" href="styles/clean-jsdoc-theme.min.css"><svg aria-hidden="true" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="display:none"><defs><symbol id="copy-icon" viewbox="0 0 488.3 488.3"><g><path d="M314.25,85.4h-227c-21.3,0-38.6,17.3-38.6,38.6v325.7c0,21.3,17.3,38.6,38.6,38.6h227c21.3,0,38.6-17.3,38.6-38.6V124    C352.75,102.7,335.45,85.4,314.25,85.4z M325.75,449.6c0,6.4-5.2,11.6-11.6,11.6h-227c-6.4,0-11.6-5.2-11.6-11.6V124    c0-6.4,5.2-11.6,11.6-11.6h227c6.4,0,11.6,5.2,11.6,11.6V449.6z"/><path d="M401.05,0h-227c-21.3,0-38.6,17.3-38.6,38.6c0,7.5,6,13.5,13.5,13.5s13.5-6,13.5-13.5c0-6.4,5.2-11.6,11.6-11.6h227    c6.4,0,11.6,5.2,11.6,11.6v325.7c0,6.4-5.2,11.6-11.6,11.6c-7.5,0-13.5,6-13.5,13.5s6,13.5,13.5,13.5c21.3,0,38.6-17.3,38.6-38.6    V38.6C439.65,17.3,422.35,0,401.05,0z"/></g></symbol><symbol id="search-icon" viewBox="0 0 512 512"><g><g><path d="M225.474,0C101.151,0,0,101.151,0,225.474c0,124.33,101.151,225.474,225.474,225.474    c124.33,0,225.474-101.144,225.474-225.474C450.948,101.151,349.804,0,225.474,0z M225.474,409.323    c-101.373,0-183.848-82.475-183.848-183.848S124.101,41.626,225.474,41.626s183.848,82.475,183.848,183.848    S326.847,409.323,225.474,409.323z"/></g></g><g><g><path d="M505.902,476.472L386.574,357.144c-8.131-8.131-21.299-8.131-29.43,0c-8.131,8.124-8.131,21.306,0,29.43l119.328,119.328    c4.065,4.065,9.387,6.098,14.715,6.098c5.321,0,10.649-2.033,14.715-6.098C514.033,497.778,514.033,484.596,505.902,476.472z"/></g></g></symbol><symbol id="font-size-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M11.246 15H4.754l-2 5H.6L7 4h2l6.4 16h-2.154l-2-5zm-.8-2L8 6.885 5.554 13h4.892zM21 12.535V12h2v8h-2v-.535a4 4 0 1 1 0-6.93zM19 18a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/></symbol><symbol id="add-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M11 11V5h2v6h6v2h-6v6h-2v-6H5v-2z"/></symbol><symbol id="minus-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M5 11h14v2H5z"/></symbol><symbol id="dark-theme-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M10 7a7 7 0 0 0 12 4.9v.1c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2h.1A6.979 6.979 0 0 0 10 7zm-6 5a8 8 0 0 0 15.062 3.762A9 9 0 0 1 8.238 4.938 7.999 7.999 0 0 0 4 12z"/></symbol><symbol id="light-theme-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M12 18a6 6 0 1 1 0-12 6 6 0 0 1 0 12zm0-2a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM11 1h2v3h-2V1zm0 19h2v3h-2v-3zM3.515 4.929l1.414-1.414L7.05 5.636 5.636 7.05 3.515 4.93zM16.95 18.364l1.414-1.414 2.121 2.121-1.414 1.414-2.121-2.121zm2.121-14.85l1.414 1.415-2.121 2.121-1.414-1.414 2.121-2.121zM5.636 16.95l1.414 1.414-2.121 2.121-1.414-1.414 2.121-2.121zM23 11v2h-3v-2h3zM4 11v2H1v-2h3z"/></symbol><symbol id="reset-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M18.537 19.567A9.961 9.961 0 0 1 12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10c0 2.136-.67 4.116-1.81 5.74L17 12h3a8 8 0 1 0-2.46 5.772l.997 1.795z"/></symbol><symbol id="down-icon" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"></path></symbol><symbol id="codepen-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M16.5 13.202L13 15.535v3.596L19.197 15 16.5 13.202zM14.697 12L12 10.202 9.303 12 12 13.798 14.697 12zM20 10.869L18.303 12 20 13.131V10.87zM19.197 9L13 4.869v3.596l3.5 2.333L19.197 9zM7.5 10.798L11 8.465V4.869L4.803 9 7.5 10.798zM4.803 15L11 19.131v-3.596l-3.5-2.333L4.803 15zM4 13.131L5.697 12 4 10.869v2.262zM2 9a1 1 0 0 1 .445-.832l9-6a1 1 0 0 1 1.11 0l9 6A1 1 0 0 1 22 9v6a1 1 0 0 1-.445.832l-9 6a1 1 0 0 1-1.11 0l-9-6A1 1 0 0 1 2 15V9z"/></symbol><symbol id="close-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636z"/></symbol><symbol id="menu-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z"/></symbol></defs></svg></head><body data-theme="dark"><div class="sidebar-container"><div class="sidebar" id="sidebar"><div class="sidebar-items-container"><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-modules"><div>Modules</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="module-DIRECTIONS.html">DIRECTIONS</a></div><div class="sidebar-section-children"><a href="module-INTENTIONS.html">INTENTIONS</a></div><div class="sidebar-section-children"><a href="module-LOG_LEVELS.html">LOG_LEVELS</a></div><div class="sidebar-section-children"><a href="module-TILE_TYPES.html">TILE_TYPES</a></div><div class="sidebar-section-children"><a href="module-gameConfig.html">gameConfig</a></div><div class="sidebar-section-children"><a href="module-geometry.html">geometry</a></div><div class="sidebar-section-children"><a href="module-hashMap.html">hashMap</a></div><div class="sidebar-section-children"><a href="module-misc.html">misc</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-classes"><div>Classes</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="Agent.html">Agent</a></div><div class="sidebar-section-children"><a href="AgentStore.html">AgentStore</a></div><div class="sidebar-section-children"><a href="Communication.html">Communication</a></div><div class="sidebar-section-children"><a href="DeliverooClient.html">DeliverooClient</a></div><div class="sidebar-section-children"><a href="MapStore.html">MapStore</a></div><div class="sidebar-section-children"><a href="Me.html">Me</a></div><div class="sidebar-section-children"><a href="MultiAgent.html">MultiAgent</a></div><div class="sidebar-section-children"><a href="MultiAgent_MultiAgent.html">MultiAgent</a></div><div class="sidebar-section-children"><a href="OpponentAgent.html">OpponentAgent</a></div><div class="sidebar-section-children"><a href="Parcel.html">Parcel</a></div><div class="sidebar-section-children"><a href="ParcelsStore.html">ParcelsStore</a></div><div class="sidebar-section-children"><a href="ServerConfig.html">ServerConfig</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-global"><div>Global</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="global.html#astarSearch">astarSearch</a></div><div class="sidebar-section-children"><a href="global.html#buildExecutor">buildExecutor</a></div><div class="sidebar-section-children"><a href="global.html#checkIfIamAtBase">checkIfIamAtBase</a></div><div class="sidebar-section-children"><a href="global.html#direction">direction</a></div><div class="sidebar-section-children"><a href="global.html#executePlan">executePlan</a></div><div class="sidebar-section-children"><a href="global.html#exitCurrentBase">exitCurrentBase</a></div><div class="sidebar-section-children"><a href="global.html#generateDeliverooDomain">generateDeliverooDomain</a></div><div class="sidebar-section-children"><a href="global.html#generateDeliverooProblem">generateDeliverooProblem</a></div><div class="sidebar-section-children"><a href="global.html#getNearTiles">getNearTiles</a></div><div class="sidebar-section-children"><a href="global.html#getPlan">getPlan</a></div><div class="sidebar-section-children"><a href="global.html#goAway">goAway</a></div><div class="sidebar-section-children"><a href="global.html#initApp">initApp</a></div><div class="sidebar-section-children"><a href="global.html#main">main</a></div><div class="sidebar-section-children"><a href="global.html#main">main</a></div><div class="sidebar-section-children"><a href="global.html#main">main</a></div><div class="sidebar-section-children"><a href="global.html#makeOnDeposit">makeOnDeposit</a></div><div class="sidebar-section-children"><a href="global.html#makeOnMove">makeOnMove</a></div><div class="sidebar-section-children"><a href="global.html#makeOnPickup">makeOnPickup</a></div><div class="sidebar-section-children"><a href="global.html#moveAndWait">moveAndWait</a></div><div class="sidebar-section-children"><a href="global.html#moveToNearestBase">moveToNearestBase</a></div><div class="sidebar-section-children"><a href="global.html#planWithDynamicAgents">planWithDynamicAgents</a></div><div class="sidebar-section-children"><a href="global.html#randomMoveAndBack">randomMoveAndBack</a></div><div class="sidebar-section-children"><a href="global.html#registerEventHandlers">registerEventHandlers</a></div><div class="sidebar-section-children"><a href="global.html#runPlanningLoop">runPlanningLoop</a></div><div class="sidebar-section-children"><a href="global.html#sanitizePddlName">sanitizePddlName</a></div><div class="sidebar-section-children"><a href="global.html#smartMove">smartMove</a></div><div class="sidebar-section-children"><a href="global.html#smartMoveToNearestBase">smartMoveToNearestBase</a></div><div class="sidebar-section-children"><a href="global.html#smartMoveToNearestBaseAndPutDown">smartMoveToNearestBaseAndPutDown</a></div><div class="sidebar-section-children"><a href="global.html#waitForAppReady">waitForAppReady</a></div></div></div></div></div><div class="navbar-container" id="VuAckcnZhf"><nav class="navbar"><div class="navbar-left-items"></div><div class="navbar-right-items"><div class="navbar-right-item"><button class="icon-button search-button" aria-label="open-search"><svg><use xlink:href="#search-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button theme-toggle" aria-label="toggle-theme"><svg><use class="theme-svg-use" xlink:href="#light-theme-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button font-size" aria-label="change-font-size"><svg><use xlink:href="#font-size-icon"></use></svg></button></div></div><nav></nav></nav></div><div class="toc-container"><div class="toc-content"><span class="bold">On this page</span><div id="eed4d2a0bfd64539bb9df78095dec881"></div></div></div><div class="body-wrapper"><div class="main-content"><div class="main-wrapper"><section><article><div class="container-overview"></div><h2 id="methods" class="subsection-title has-anchor">Methods</h2><h3 class="name has-anchor" id="astarSearch"><span class="type-signature"></span>astarSearch<span class="signature">(start, goal, mapStore)</span></h3><div class="description">This function implements the A* search algorithm to find the shortest path from start to goal. It uses a heuristic based on the Manhattan distance to prioritize nodes in the search. The function returns an array of coordinates representing the path from start to goal. If no path is found, it returns an empty array.</div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>start</code></td><td class="type"><span class="param-type">Object</span></td><td class="description last">Starting coordinates</td></tr><tr><td class="name"><code>goal</code></td><td class="type"><span class="param-type">Object</span></td><td class="description last">Goal coordinates</td></tr><tr><td class="name"><code>mapStore</code></td><td class="type"><span class="param-type"><a href="MapStore.html">MapStore</a></span></td><td class="description last">The MapStore instance containing the grid and obstacles</td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="utils_astar.js.html">utils/astar.js</a>, <a href="utils_astar.js.html#line16">line 16</a></li></ul></dd></div></dl><h3 class="name has-anchor" id="buildExecutor"><span class="type-signature"></span>buildExecutor<span class="signature">(onMove, onPickup, onDeposit)</span><span class="type-signature"> &rarr; {PddlExecutor}</span></h3><div class="description">Builds a PddlExecutor instance with action handlers for MOVE, PICKUP, and DEPOSIT.</div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>onMove</code></td><td class="type"><span class="param-type">function</span></td><td class="description last">Function to call when MOVE action is executed.</td></tr><tr><td class="name"><code>onPickup</code></td><td class="type"><span class="param-type">function</span></td><td class="description last">Function to call when PICKUP action is executed.</td></tr><tr><td class="name"><code>onDeposit</code></td><td class="type"><span class="param-type">function</span></td><td class="description last">Function to call when DEPOSIT action is executed.</td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="PDDL_planner.js.html">PDDL/planner.js</a>, <a href="PDDL_planner.js.html#line18">line 18</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc">- Configured PddlExecutor instance.</div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">PddlExecutor</span></dd></dl></div><h3 class="name has-anchor" id="checkIfIamAtBase"><span class="type-signature"></span>checkIfIamAtBase<span class="signature">(me, mapStore)</span><span class="type-signature"> &rarr; {boolean}</span></h3><div class="description">This function checks if the current player's coordinates match any of the base locations in the map store. It uses the coord2Key function to convert the player's coordinates into a key that can be checked against the map store's bases.</div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>me</code></td><td class="type"><span class="param-type"><a href="Me.html">Me</a></span></td><td class="description last">The current player instance.</td></tr><tr><td class="name"><code>mapStore</code></td><td class="type"><span class="param-type"><a href="MapStore.html">MapStore</a></span></td><td class="description last">The MapStore instance containing the current map state.</td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="mainWithPlanner.js.html">mainWithPlanner.js</a>, <a href="mainWithPlanner.js.html#line241">line 241</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Throws:</strong><dl><dt><div class="param-desc">- Throws an error if the map store is not initialized or if the player's coordinates are invalid.</div></dt><dd></dd><dt><dl><dt>Type</dt><dd><span class="param-type">Error</span></dd></dl></dt><dd></dd></dl></div><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc">- Returns true if the player is at a base, false otherwise.</div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">boolean</span></dd></dl></div><h3 class="name has-anchor" id="direction"><span class="type-signature"></span>direction<span class="signature">(from, to)</span><span class="type-signature"> &rarr; {string|null}</span></h3><div class="description">Determine the direction from one coordinate to another.</div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>from</code></td><td class="type"><span class="param-type">Object</span></td><td class="description last">Starting coordinates</td></tr><tr><td class="name"><code>to</code></td><td class="type"><span class="param-type">Object</span></td><td class="description last">Target coordinates</td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="utils_astar.js.html">utils/astar.js</a>, <a href="utils_astar.js.html#line83">line 83</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc">- Returns 'right', 'left', 'up', 'down' or null if coordinates are the same</div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">string</span> |<wbr> <span class="param-type">null</span></dd></dl></div><h3 class="name has-anchor" id="executePlan"><span class="type-signature"></span>executePlan<span class="signature">(rawPlan, onMove, onPickup, onDeposit)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h3><div class="description">Executes a PDDL plan using the provided action handlers.</div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>rawPlan</code></td><td class="type"><span class="param-type">Array</span></td><td class="description last">The raw plan generated by the PDDL solver.</td></tr><tr><td class="name"><code>onMove</code></td><td class="type"><span class="param-type">function</span></td><td class="description last">Function to call when MOVE action is executed.</td></tr><tr><td class="name"><code>onPickup</code></td><td class="type"><span class="param-type">function</span></td><td class="description last">Function to call when PICKUP action is executed.</td></tr><tr><td class="name"><code>onDeposit</code></td><td class="type"><span class="param-type">function</span></td><td class="description last">Function to call when DEPOSIT action is executed.</td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="PDDL_planner.js.html">PDDL/planner.js</a>, <a href="PDDL_planner.js.html#line105">line 105</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Throws:</strong><dl><dt><div class="param-desc">- Throws an error if the plan execution fails.</div></dt><dd></dd><dt><dl><dt>Type</dt><dd><span class="param-type">Error</span></dd></dl></dt><dd></dd></dl></div><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc">- A promise that resolves when the plan execution is complete.</div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">Promise.&lt;void></span></dd></dl></div><h3 class="name has-anchor" id="exitCurrentBase"><span class="type-signature"></span>exitCurrentBase<span class="signature">(client, me, mapStore)</span><span class="type-signature"> &rarr; {Promise.&lt;boolean>}</span></h3><div class="description">This function is used to exit the current base by first marking the tile as WALKABLE, then finding the nearest base and moving towards it. After the move, it resets the tile type back to BASE. This is useful for scenarios where the player needs to leave the current base and find a new one, ensuring that the map state is correctly updated.</div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>client</code></td><td class="type"><span class="param-type"><a href="DeliverooClient.html">DeliverooClient</a></span></td><td class="description last">The Deliveroo client instance.</td></tr><tr><td class="name"><code>me</code></td><td class="type"><span class="param-type"><a href="Me.html">Me</a></span></td><td class="description last">The current player instance.</td></tr><tr><td class="name"><code>mapStore</code></td><td class="type"><span class="param-type"><a href="MapStore.html">MapStore</a></span></td><td class="description last">The MapStore instance containing the current map state.</td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="actions_movement.js.html">actions/movement.js</a>, <a href="actions_movement.js.html#line258">line 258</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc">- Returns true if successfully moved to a new base, false otherwise.</div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">Promise.&lt;boolean></span></dd></dl></div><h3 class="name has-anchor" id="generateDeliverooDomain"><span class="type-signature"></span>generateDeliverooDomain<span class="signature">()</span></h3><div class="description">Returns a static PDDL domain definition (deliveroo-domain.pddl).</div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="PDDL_pddlTemplates.js.html">PDDL/pddlTemplates.js</a>, <a href="PDDL_pddlTemplates.js.html#line34">line 34</a></li></ul></dd></div></dl><h3 class="name has-anchor" id="generateDeliverooProblem"><span class="type-signature"></span>generateDeliverooProblem<span class="signature">()</span></h3><div class="description">Predicates that I have in the domain-file: - (at ?a - agent ?t - tile) -(parcel-at ?p - parcel ?t - tile) - (carrying ?a - agent ?p - parcel) - (base-at ?b - base ?t - tile) - (delivered ?p - parcel) -(adjacent ?t1 - tile ?t2 - tile) So I need to use these predicates to build the problem The PDDL problem definition has the following structure: define (problem PROBLEM_NAME) (:domain DOMAIN_NAME) (:objects OBJ1 OBJ2 ... OBJ_N) (:init ATOM1 ATOM2 ... ATOM_N) (:goal CONDITION_FORMULA) )</div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="PDDL_pddlTemplates.js.html">PDDL/pddlTemplates.js</a>, <a href="PDDL_pddlTemplates.js.html#line130">line 130</a></li></ul></dd></div></dl><h3 class="name has-anchor" id="getNearTiles"><span class="type-signature"></span>getNearTiles<span class="signature">(mapStore, me, mate, myPos)</span><span class="type-signature"> &rarr; {Array.&lt;string>}</span></h3><div class="description">Gets the possible near tiles for movement based on the current position of the agent and its mate.</div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>mapStore</code></td><td class="type"><span class="param-type"><a href="MapStore.html">MapStore</a></span></td><td class="description last">The MapStore instance containing the current map state.</td></tr><tr><td class="name"><code>me</code></td><td class="type"><span class="param-type"><a href="Me.html">Me</a></span></td><td class="description last">The current player instance.</td></tr><tr><td class="name"><code>mate</code></td><td class="type"><span class="param-type"><a href="Me.html">Me</a></span></td><td class="description last">The mate player instance.</td></tr><tr><td class="name"><code>myPos</code></td><td class="type"><span class="param-type">Object</span></td><td class="description last">The current position of the agent.</td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="actions_movement.js.html">actions/movement.js</a>, <a href="actions_movement.js.html#line145">line 145</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc">- An array of possible movement directions (e.g., ['UP', 'DOWN']).</div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">Array.&lt;string></span></dd></dl></div><h3 class="name has-anchor" id="getPlan"><span class="type-signature"></span>getPlan<span class="signature">(mapStore, parcelsStore, me, serverConfig)</span><span class="type-signature"> &rarr; {Promise.&lt;Array>}</span></h3><div class="description">Generates a PDDL plan for the Deliveroo problem using the online solver.</div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>mapStore</code></td><td class="type"><span class="param-type"><a href="MapStore.html">MapStore</a></span></td><td class="description last">The MapStore instance containing the current map state.</td></tr><tr><td class="name"><code>parcelsStore</code></td><td class="type"><span class="param-type"><a href="ParcelsStore.html">ParcelsStore</a></span></td><td class="description last">The ParcelsStore instance containing the current parcels state.</td></tr><tr><td class="name"><code>me</code></td><td class="type"><span class="param-type"><a href="Me.html">Me</a></span></td><td class="description last">The current player instance.</td></tr><tr><td class="name"><code>serverConfig</code></td><td class="type"><span class="param-type"><a href="ServerConfig.html">ServerConfig</a></span></td><td class="description last">The server configuration instance.</td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="PDDL_planner.js.html">PDDL/planner.js</a>, <a href="PDDL_planner.js.html#line86">line 86</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Throws:</strong><dl><dt><div class="param-desc">- Throws an error if the solver fails to generate a plan.</div></dt><dd></dd><dt><dl><dt>Type</dt><dd><span class="param-type">Error</span></dd></dl></dt><dd></dd></dl></div><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc">- A promise that resolves to the raw plan generated by the solver.</div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">Promise.&lt;Array></span></dd></dl></div><h3 class="name has-anchor" id="goAway"><span class="type-signature"></span>goAway<span class="signature">(client, me, mate, mapStore)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h3><div class="description">This function iterates a specified number of times, each time selecting a random direction from the possible near tiles around the agent's current position. It moves the agent in that random direction and updates the agent's position for the next iteration. This is useful for simulating random movement away from the current position, which can be useful in various game scenarios.</div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>client</code></td><td class="type"><span class="param-type"><a href="DeliverooClient.html">DeliverooClient</a></span></td><td class="description last">The Deliveroo client instance.</td></tr><tr><td class="name"><code>me</code></td><td class="type"><span class="param-type"><a href="Me.html">Me</a></span></td><td class="description last">The current player instance.</td></tr><tr><td class="name"><code>mate</code></td><td class="type"><span class="param-type"><a href="Me.html">Me</a></span></td><td class="description last">The mate player instance.</td></tr><tr><td class="name"><code>mapStore</code></td><td class="type"><span class="param-type"><a href="MapStore.html">MapStore</a></span></td><td class="description last">The MapStore instance containing the current map state.</td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="actions_movement.js.html">actions/movement.js</a>, <a href="actions_movement.js.html#line194">line 194</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc">- A promise that resolves when the movement is complete.</div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">Promise.&lt;void></span></dd></dl></div><h3 class="name has-anchor" id="initApp"><span class="type-signature">(async) </span>initApp<span class="signature">()</span><span class="type-signature"> &rarr; {Promise.&lt;Object>}</span></h3><div class="description">This function initializes the main components of the application: - DeliverooClient: The client to interact with the Deliveroo API. - Me: Represents the current player. - ParcelsStore: Manages the parcels in the game. - MapStore: Manages the game map - AgentStore: Manages the agents in the game. - ServerConfig: Holds the server configuration.</div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="mainWithPlanner.js.html">mainWithPlanner.js</a>, <a href="mainWithPlanner.js.html#line43">line 43</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Throws:</strong><dl><dt><div class="param-desc">- Throws an error if initialization fails.</div></dt><dd></dd><dt><dl><dt>Type</dt><dd><span class="param-type">Error</span></dd></dl></dt><dd></dd></dl></div><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc">- An object containing initialized instances.</div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">Promise.&lt;Object></span></dd></dl></div><h3 class="name has-anchor" id="main"><span class="type-signature">(async) </span>main<span class="signature">()</span></h3><div class="description">Main function to initialize the Deliveroo client, models, and agent. It sets up event listeners for client events and runs the agent's decision-making loop. The agent updates its beliefs, generates desires, filters intentions, and acts based on the current state of the game. The loop continues until the game is terminated, allowing the agent to continuously adapt to the game environment.</div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="main.js.html">main.js</a>, <a href="main.js.html#line12">line 12</a></li></ul></dd></div></dl><h3 class="name has-anchor" id="main"><span class="type-signature">(async) </span>main<span class="signature">()</span></h3><div class="description">Main function to initialize the Deliveroo client, models, and agents. It sets up event listeners for client events and runs the agents' decision-making loop. The agents update their beliefs, generate desires, filter intentions, and act based on the current state of the game. The loop continues until the game is terminated, allowing the agents to continuously adapt to the game environment.</div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="mainMulti.js.html">mainMulti.js</a>, <a href="mainMulti.js.html#line19">line 19</a></li></ul></dd></div></dl><h3 class="name has-anchor" id="main"><span class="type-signature">(async) </span>main<span class="signature">()</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h3><div class="description">This function initializes the application by creating instances of necessary classes, registers event handlers, waits for the application to be ready, and then starts the main planning loop. It serves as the entry point for the application, ensuring that all components are set up correctly before starting the main logic. * @throws {Error} - Throws an error if the application initialization or planning loop fails.</div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="mainWithPlanner.js.html">mainWithPlanner.js</a>, <a href="mainWithPlanner.js.html#line329">line 329</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc">- A promise that resolves when the application is fully initialized and the planning loop is running.</div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">Promise.&lt;void></span></dd></dl></div><h3 class="name has-anchor" id="makeOnDeposit"><span class="type-signature"></span>makeOnDeposit<span class="signature">(client, parcels, me)</span><span class="type-signature"> &rarr; {function}</span></h3><div class="description">This function returns a handler that can be used to emit a putdown action. It uses the client to emit a putdown event with the current parcels and the player's ID. This will trigger the server to handle the deposit logic for the parcels.</div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>client</code></td><td class="type"><span class="param-type"><a href="DeliverooClient.html">DeliverooClient</a></span></td><td class="description last">The Deliveroo client instance.</td></tr><tr><td class="name"><code>parcels</code></td><td class="type"><span class="param-type"><a href="ParcelsStore.html">ParcelsStore</a></span></td><td class="description last">The parcels store instance.</td></tr><tr><td class="name"><code>me</code></td><td class="type"><span class="param-type"><a href="Me.html">Me</a></span></td><td class="description last">The current player instance.</td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="mainWithPlanner.js.html">mainWithPlanner.js</a>, <a href="mainWithPlanner.js.html#line188">line 188</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc">- A function that emits a putdown action with the current parcels when called.</div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">function</span></dd></dl></div><h3 class="name has-anchor" id="makeOnMove"><span class="type-signature"></span>makeOnMove<span class="signature">(client, me)</span><span class="type-signature"> &rarr; {function}</span></h3><div class="description">This function returns a handler that can be used to move the agent to a specified target position. It calculates the direction from the current position to the target position and uses the client to emit a move action. It also waits for the move to complete and checks if the agent has reached the target position. If the move fails or the agent does not reach the target position, it logs an error and rejects the promise.</div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>client</code></td><td class="type"><span class="param-type"><a href="DeliverooClient.html">DeliverooClient</a></span></td><td class="description last">The Deliveroo client instance.</td></tr><tr><td class="name"><code>me</code></td><td class="type"><span class="param-type"><a href="Me.html">Me</a></span></td><td class="description last">The current player instance.</td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="mainWithPlanner.js.html">mainWithPlanner.js</a>, <a href="mainWithPlanner.js.html#line129">line 129</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Throws:</strong><dl><dt><div class="param-desc">- Throws an error if the direction cannot be determined or if the move fails.</div></dt><dd></dd><dt><dl><dt>Type</dt><dd><span class="param-type">Error</span></dd></dl></dt><dd></dd></dl></div><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc">- A function that takes target coordinates and moves the agent.</div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">function</span></dd></dl></div><h3 class="name has-anchor" id="makeOnPickup"><span class="type-signature"></span>makeOnPickup<span class="signature">(client, me)</span><span class="type-signature"> &rarr; {function}</span></h3><div class="description">This function returns a handler that can be used to emit a pickup action. It uses the client to emit a pickup event, which will trigger the server to handle the pickup logic.</div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>client</code></td><td class="type"><span class="param-type"><a href="DeliverooClient.html">DeliverooClient</a></span></td><td class="description last">The Deliveroo client instance.</td></tr><tr><td class="name"><code>me</code></td><td class="type"><span class="param-type"><a href="Me.html">Me</a></span></td><td class="description last">The current player instance.</td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="mainWithPlanner.js.html">mainWithPlanner.js</a>, <a href="mainWithPlanner.js.html#line171">line 171</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc">- A function that emits a pickup action when called.</div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">function</span></dd></dl></div><h3 class="name has-anchor" id="moveAndWait"><span class="type-signature"></span>moveAndWait<span class="signature">(client, me, dir)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h3><div class="description">This function emits a move command to the Deliveroo client and waits for the player's state to update with the new position. It listens for the 'onYou' event to confirm that the move has been processed and the player's position has been updated.</div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>client</code></td><td class="type"><span class="param-type"><a href="DeliverooClient.html">DeliverooClient</a></span></td><td class="description last">The Deliveroo client instance.</td></tr><tr><td class="name"><code>me</code></td><td class="type"><span class="param-type"><a href="Me.html">Me</a></span></td><td class="description last">The current player instance.</td></tr><tr><td class="name"><code>dir</code></td><td class="type"><span class="param-type">string</span></td><td class="description last">The direction to move in (e.g., 'UP', 'DOWN', 'LEFT', 'RIGHT').</td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="actions_movement.js.html">actions/movement.js</a>, <a href="actions_movement.js.html#line22">line 22</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc">- A promise that resolves when the move is complete.</div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">Promise.&lt;void></span></dd></dl></div><h3 class="name has-anchor" id="moveToNearestBase"><span class="type-signature"></span>moveToNearestBase<span class="signature">(client, me, mapStore)</span><span class="type-signature"> &rarr; {Promise.&lt;boolean>}</span></h3><div class="description">This function finds the nearest base on the map and uses the A* search algorithm to calculate the path to that base. It then moves the agent in the direction of the first step in the path. If a valid path is found, it moves the agent and returns true. If no base is found or no valid path exists, it logs an error message and returns false.</div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>client</code></td><td class="type"><span class="param-type"><a href="DeliverooClient.html">DeliverooClient</a></span></td><td class="description last">The Deliveroo client instance.</td></tr><tr><td class="name"><code>me</code></td><td class="type"><span class="param-type"><a href="Me.html">Me</a></span></td><td class="description last">The current player instance.</td></tr><tr><td class="name"><code>mapStore</code></td><td class="type"><span class="param-type"><a href="MapStore.html">MapStore</a></span></td><td class="description last">The MapStore instance containing the current map state.</td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="actions_movement.js.html">actions/movement.js</a>, <a href="actions_movement.js.html#line221">line 221</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc">- Returns true if successfully moved to a new base, false otherwise.</div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">Promise.&lt;boolean></span></dd></dl></div><h3 class="name has-anchor" id="planWithDynamicAgents"><span class="type-signature">(async) </span>planWithDynamicAgents<span class="signature">(mapStore, agentStore, me, parcels, serverConfig)</span><span class="type-signature"> &rarr; {Promise.&lt;Array>}</span></h3><div class="description">This function generates a plan for the current player based on the current map state, visible agents, and parcels. It temporarily removes agents from the map to avoid interference during planning. After generating the plan, it restores the agents back to their original state on the map. If an error occurs during planning, it logs the error and returns an empty plan.</div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>mapStore</code></td><td class="type"><span class="param-type"><a href="MapStore.html">MapStore</a></span></td><td class="description last">The MapStore instance containing the current map state.</td></tr><tr><td class="name"><code>agentStore</code></td><td class="type"><span class="param-type"><a href="AgentStore.html">AgentStore</a></span></td><td class="description last">The AgentStore instance containing the current agents state.</td></tr><tr><td class="name"><code>me</code></td><td class="type"><span class="param-type"><a href="Me.html">Me</a></span></td><td class="description last">The current player instance.</td></tr><tr><td class="name"><code>parcels</code></td><td class="type"><span class="param-type"><a href="ParcelsStore.html">ParcelsStore</a></span></td><td class="description last">The list of parcels to be processed.</td></tr><tr><td class="name"><code>serverConfig</code></td><td class="type"><span class="param-type"><a href="ServerConfig.html">ServerConfig</a></span></td><td class="description last">The server configuration instance.</td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="mainWithPlanner.js.html">mainWithPlanner.js</a>, <a href="mainWithPlanner.js.html#line210">line 210</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Throws:</strong><dl><dt><div class="param-desc">- Throws an error if the planning process fails.</div></dt><dd></dd><dt><dl><dt>Type</dt><dd><span class="param-type">Error</span></dd></dl></dt><dd></dd></dl></div><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc">- A promise that resolves to the raw plan generated by the planner.</div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">Promise.&lt;Array></span></dd></dl></div><h3 class="name has-anchor" id="randomMoveAndBack"><span class="type-signature"></span>randomMoveAndBack<span class="signature">(client, me, mapStore)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h3><div class="description">This function checks the surrounding tiles for walkable paths and randomly selects one to move in. After moving in the random direction, it immediately moves back to the original position. This is useful for testing movement logic or simulating random behavior in the game.</div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>client</code></td><td class="type"><span class="param-type"><a href="DeliverooClient.html">DeliverooClient</a></span></td><td class="description last">The Deliveroo client instance.</td></tr><tr><td class="name"><code>me</code></td><td class="type"><span class="param-type"><a href="Me.html">Me</a></span></td><td class="description last">The current player instance.</td></tr><tr><td class="name"><code>mapStore</code></td><td class="type"><span class="param-type"><a href="MapStore.html">MapStore</a></span></td><td class="description last">The MapStore instance containing the current map state.</td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="actions_movement.js.html">actions/movement.js</a>, <a href="actions_movement.js.html#line112">line 112</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc">- A promise that resolves when the random move and return are complete.</div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">Promise.&lt;void></span></dd></dl></div><h3 class="name has-anchor" id="registerEventHandlers"><span class="type-signature"></span>registerEventHandlers<span class="signature">(context)</span></h3><div class="description">This function sets up event listeners for various events emitted by the Deliveroo client. It updates the player state, map tiles, configuration, parcels sensing, and agents sensing. It ensures that the application reacts to changes in the game state and updates the relevant models accordingly.</div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>context</code></td><td class="type"><span class="param-type">Object</span></td><td class="description last">The context containing initialized instances.<h6>Properties</h6><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>client</code></td><td class="type"><span class="param-type"><a href="DeliverooClient.html">DeliverooClient</a></span></td><td class="description last">The Deliveroo client instance.</td></tr><tr><td class="name"><code>me</code></td><td class="type"><span class="param-type"><a href="Me.html">Me</a></span></td><td class="description last">The current player instance.</td></tr><tr><td class="name"><code>parcels</code></td><td class="type"><span class="param-type"><a href="ParcelsStore.html">ParcelsStore</a></span></td><td class="description last">The parcels store instance.</td></tr><tr><td class="name"><code>mapStore</code></td><td class="type"><span class="param-type"><a href="MapStore.html">MapStore</a></span></td><td class="description last">The map store instance.</td></tr><tr><td class="name"><code>agentStore</code></td><td class="type"><span class="param-type"><a href="AgentStore.html">AgentStore</a></span></td><td class="description last">The agent store instance.</td></tr><tr><td class="name"><code>serverConfig</code></td><td class="type"><span class="param-type"><a href="ServerConfig.html">ServerConfig</a></span></td><td class="description last">The server configuration instance.</td></tr></tbody></table></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="mainWithPlanner.js.html">mainWithPlanner.js</a>, <a href="mainWithPlanner.js.html#line68">line 68</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Throws:</strong><dl><dt><div class="param-desc">- Throws an error if the client fails to register event handlers.</div></dt><dd></dd><dt><dl><dt>Type</dt><dd><span class="param-type">Error</span></dd></dl></dt><dd></dd></dl></div><h3 class="name has-anchor" id="runPlanningLoop"><span class="type-signature">(async) </span>runPlanningLoop<span class="signature">(context)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h3><div class="description">This function runs the main planning loop for the application. It continuously checks the game state, computes a plan using dynamic agents, and executes the plan. If no plan is found, it attempts to move towards the nearest base. It handles errors during planning and execution, ensuring that the application remains responsive and can recover from failures.</div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>context</code></td><td class="type"><span class="param-type">Object</span></td><td class="description last">The context containing initialized instances.<h6>Properties</h6><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>client</code></td><td class="type"><span class="param-type"><a href="DeliverooClient.html">DeliverooClient</a></span></td><td class="description last">The Deliveroo client instance.</td></tr><tr><td class="name"><code>me</code></td><td class="type"><span class="param-type"><a href="Me.html">Me</a></span></td><td class="description last">The current player instance.</td></tr><tr><td class="name"><code>parcels</code></td><td class="type"><span class="param-type"><a href="ParcelsStore.html">ParcelsStore</a></span></td><td class="description last">The parcels store instance.</td></tr><tr><td class="name"><code>mapStore</code></td><td class="type"><span class="param-type"><a href="MapStore.html">MapStore</a></span></td><td class="description last">The map store instance.</td></tr><tr><td class="name"><code>agentStore</code></td><td class="type"><span class="param-type"><a href="AgentStore.html">AgentStore</a></span></td><td class="description last">The agent store instance.</td></tr><tr><td class="name"><code>serverConfig</code></td><td class="type"><span class="param-type"><a href="ServerConfig.html">ServerConfig</a></span></td><td class="description last">The server configuration instance.</td></tr></tbody></table></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="mainWithPlanner.js.html">mainWithPlanner.js</a>, <a href="mainWithPlanner.js.html#line264">line 264</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Throws:</strong><dl><dt><div class="param-desc">- Throws an error if the planning or execution fails.</div></dt><dd></dd><dt><dl><dt>Type</dt><dd><span class="param-type">Error</span></dd></dl></dt><dd></dd></dl></div><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc">- A promise that resolves when the planning loop is complete.</div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">Promise.&lt;void></span></dd></dl></div><h3 class="name has-anchor" id="sanitizePddlName"><span class="type-signature"></span>sanitizePddlName<span class="signature">(raw)</span><span class="type-signature"> &rarr; {string}</span></h3><div class="description">This function is useful for ensuring that names used in PDDL (Planning Domain Definition Language) are valid and follow the naming conventions required by PDDL, such as using lowercase letters, numbers, and underscores, while avoiding spaces and special characters.</div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>raw</code></td><td class="type"><span class="param-type">string</span></td><td class="description last">The raw name to sanitize.</td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="PDDL_pddlTemplates.js.html">PDDL/pddlTemplates.js</a>, <a href="PDDL_pddlTemplates.js.html#line21">line 21</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc">- The sanitized PDDL name.</div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">string</span></dd></dl></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Example</strong><div class="rel"><pre class="prettyprint"><code>sanitizePddlName("  My Name!  "); // returns "my_name"
sanitizePddlName("Invalid@Name#123"); // returns "invalid_name_123"
sanitizePddlName("  __Extra__Underscores__  "); // returns "extra_underscores"
sanitizePddlName("1234"); // returns "1234"
sanitizePddlName("!@#$%^&amp;*()"); // returns ""</code></pre></div></div><h3 class="name has-anchor" id="smartMove"><span class="type-signature"></span>smartMove<span class="signature">(client, me, target, mapStore)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h3><div class="description">This function calculates the path from the current position to the target position using the A* search algorithm. It then iterates through each step in the path, determines the direction to move in, and calls the `moveAndWait` function to move the agent step by step.</div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>client</code></td><td class="type"><span class="param-type"><a href="DeliverooClient.html">DeliverooClient</a></span></td><td class="description last">The Deliveroo client instance.</td></tr><tr><td class="name"><code>me</code></td><td class="type"><span class="param-type"><a href="Me.html">Me</a></span></td><td class="description last">The current player instance.</td></tr><tr><td class="name"><code>target</code></td><td class="type"><span class="param-type">Object</span></td><td class="description last">The target position to move towards.</td></tr><tr><td class="name"><code>mapStore</code></td><td class="type"><span class="param-type"><a href="MapStore.html">MapStore</a></span></td><td class="description last">The MapStore instance containing the current map state.</td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="actions_movement.js.html">actions/movement.js</a>, <a href="actions_movement.js.html#line48">line 48</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc">- A promise that resolves when the movement is complete.</div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">Promise.&lt;void></span></dd></dl></div><h3 class="name has-anchor" id="smartMoveToNearestBase"><span class="type-signature"></span>smartMoveToNearestBase<span class="signature">(client, me, mapStore)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h3><div class="description">This function finds the nearest base on the map and moves the agent towards it using the `smartMove` function. If a base is found, it will navigate to that base efficiently, taking into account the current map state and obstacles.</div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>client</code></td><td class="type"><span class="param-type"><a href="DeliverooClient.html">DeliverooClient</a></span></td><td class="description last">The Deliveroo client instance.</td></tr><tr><td class="name"><code>me</code></td><td class="type"><span class="param-type"><a href="Me.html">Me</a></span></td><td class="description last">The current player instance.</td></tr><tr><td class="name"><code>mapStore</code></td><td class="type"><span class="param-type"><a href="MapStore.html">MapStore</a></span></td><td class="description last">The MapStore instance containing the current map state.</td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="actions_movement.js.html">actions/movement.js</a>, <a href="actions_movement.js.html#line69">line 69</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc">- A promise that resolves when the movement is complete.</div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">Promise.&lt;void></span></dd></dl></div><h3 class="name has-anchor" id="smartMoveToNearestBaseAndPutDown"><span class="type-signature"></span>smartMoveToNearestBaseAndPutDown<span class="signature">(client, me, mapStore, parcels)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h3><div class="description">This function finds the nearest base on the map and moves the agent towards it using the `smartMove` function. Once the agent reaches the base, it emits a put down command for all carried parcels. This is useful for efficiently delivering parcels to the nearest base, ensuring that the agent can quickly return to the delivery process.</div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>client</code></td><td class="type"><span class="param-type"><a href="DeliverooClient.html">DeliverooClient</a></span></td><td class="description last">The Deliveroo client instance.</td></tr><tr><td class="name"><code>me</code></td><td class="type"><span class="param-type"><a href="Me.html">Me</a></span></td><td class="description last">The current player instance.</td></tr><tr><td class="name"><code>mapStore</code></td><td class="type"><span class="param-type"><a href="MapStore.html">MapStore</a></span></td><td class="description last">The MapStore instance containing the current map state.</td></tr><tr><td class="name"><code>parcels</code></td><td class="type"><span class="param-type"><a href="ParcelsStore.html">ParcelsStore</a></span></td><td class="description last">The list of parcels to be put down.</td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="actions_movement.js.html">actions/movement.js</a>, <a href="actions_movement.js.html#line89">line 89</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc">- A promise that resolves when the movement and put down action are complete.</div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">Promise.&lt;void></span></dd></dl></div><h3 class="name has-anchor" id="waitForAppReady"><span class="type-signature">(async) </span>waitForAppReady<span class="signature">(context)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h3><div class="description">This function continuously checks if the player ID is set and the map size is greater than zero. It uses a polling mechanism to wait until these conditions are met before resolving the promise. This is useful to ensure that the application has all necessary data before proceeding with the main logic.</div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>context</code></td><td class="type"><span class="param-type">Object</span></td><td class="description last">The context containing initialized instances.<h6>Properties</h6><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>me</code></td><td class="type"><span class="param-type"><a href="Me.html">Me</a></span></td><td class="description last">The current player instance.</td></tr><tr><td class="name"><code>mapStore</code></td><td class="type"><span class="param-type"><a href="MapStore.html">MapStore</a></span></td><td class="description last">The map store instance.</td></tr></tbody></table></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="mainWithPlanner.js.html">mainWithPlanner.js</a>, <a href="mainWithPlanner.js.html#line111">line 111</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Throws:</strong><dl><dt><div class="param-desc">- Throws an error if the application is not ready within a reasonable time.</div></dt><dd></dd><dt><dl><dt>Type</dt><dd><span class="param-type">Error</span></dd></dl></dt><dd></dd></dl></div><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc">- A promise that resolves when the application is ready.</div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">Promise.&lt;void></span></dd></dl></div></article></section></div></div></div><div class="search-container" id="PkfLWpAbet" style="display:none"><div class="wrapper" id="iCxFxjkHbP"><button class="icon-button search-close-button" id="VjLlGakifb" aria-label="close search"><svg><use xlink:href="#close-icon"></use></svg></button><div class="search-box-c"><svg><use xlink:href="#search-icon"></use></svg> <input type="text" id="vpcKVYIppa" class="search-input" placeholder="Search..." autofocus></div><div class="search-result-c" id="fWwVHRuDuN"><span class="search-result-c-text">Type anything to view search result</span></div></div></div><div class="mobile-menu-icon-container"><button class="icon-button" id="mobile-menu" data-isopen="false" aria-label="menu"><svg><use xlink:href="#menu-icon"></use></svg></button></div><div id="mobile-sidebar" class="mobile-sidebar-container"><div class="mobile-sidebar-wrapper"><div class="mobile-nav-links"></div><div class="mobile-sidebar-items-c"><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-modules"><div>Modules</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="module-DIRECTIONS.html">DIRECTIONS</a></div><div class="sidebar-section-children"><a href="module-INTENTIONS.html">INTENTIONS</a></div><div class="sidebar-section-children"><a href="module-LOG_LEVELS.html">LOG_LEVELS</a></div><div class="sidebar-section-children"><a href="module-TILE_TYPES.html">TILE_TYPES</a></div><div class="sidebar-section-children"><a href="module-gameConfig.html">gameConfig</a></div><div class="sidebar-section-children"><a href="module-geometry.html">geometry</a></div><div class="sidebar-section-children"><a href="module-hashMap.html">hashMap</a></div><div class="sidebar-section-children"><a href="module-misc.html">misc</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-classes"><div>Classes</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="Agent.html">Agent</a></div><div class="sidebar-section-children"><a href="AgentStore.html">AgentStore</a></div><div class="sidebar-section-children"><a href="Communication.html">Communication</a></div><div class="sidebar-section-children"><a href="DeliverooClient.html">DeliverooClient</a></div><div class="sidebar-section-children"><a href="MapStore.html">MapStore</a></div><div class="sidebar-section-children"><a href="Me.html">Me</a></div><div class="sidebar-section-children"><a href="MultiAgent.html">MultiAgent</a></div><div class="sidebar-section-children"><a href="MultiAgent_MultiAgent.html">MultiAgent</a></div><div class="sidebar-section-children"><a href="OpponentAgent.html">OpponentAgent</a></div><div class="sidebar-section-children"><a href="Parcel.html">Parcel</a></div><div class="sidebar-section-children"><a href="ParcelsStore.html">ParcelsStore</a></div><div class="sidebar-section-children"><a href="ServerConfig.html">ServerConfig</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-global"><div>Global</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="global.html#astarSearch">astarSearch</a></div><div class="sidebar-section-children"><a href="global.html#buildExecutor">buildExecutor</a></div><div class="sidebar-section-children"><a href="global.html#checkIfIamAtBase">checkIfIamAtBase</a></div><div class="sidebar-section-children"><a href="global.html#direction">direction</a></div><div class="sidebar-section-children"><a href="global.html#executePlan">executePlan</a></div><div class="sidebar-section-children"><a href="global.html#exitCurrentBase">exitCurrentBase</a></div><div class="sidebar-section-children"><a href="global.html#generateDeliverooDomain">generateDeliverooDomain</a></div><div class="sidebar-section-children"><a href="global.html#generateDeliverooProblem">generateDeliverooProblem</a></div><div class="sidebar-section-children"><a href="global.html#getNearTiles">getNearTiles</a></div><div class="sidebar-section-children"><a href="global.html#getPlan">getPlan</a></div><div class="sidebar-section-children"><a href="global.html#goAway">goAway</a></div><div class="sidebar-section-children"><a href="global.html#initApp">initApp</a></div><div class="sidebar-section-children"><a href="global.html#main">main</a></div><div class="sidebar-section-children"><a href="global.html#main">main</a></div><div class="sidebar-section-children"><a href="global.html#main">main</a></div><div class="sidebar-section-children"><a href="global.html#makeOnDeposit">makeOnDeposit</a></div><div class="sidebar-section-children"><a href="global.html#makeOnMove">makeOnMove</a></div><div class="sidebar-section-children"><a href="global.html#makeOnPickup">makeOnPickup</a></div><div class="sidebar-section-children"><a href="global.html#moveAndWait">moveAndWait</a></div><div class="sidebar-section-children"><a href="global.html#moveToNearestBase">moveToNearestBase</a></div><div class="sidebar-section-children"><a href="global.html#planWithDynamicAgents">planWithDynamicAgents</a></div><div class="sidebar-section-children"><a href="global.html#randomMoveAndBack">randomMoveAndBack</a></div><div class="sidebar-section-children"><a href="global.html#registerEventHandlers">registerEventHandlers</a></div><div class="sidebar-section-children"><a href="global.html#runPlanningLoop">runPlanningLoop</a></div><div class="sidebar-section-children"><a href="global.html#sanitizePddlName">sanitizePddlName</a></div><div class="sidebar-section-children"><a href="global.html#smartMove">smartMove</a></div><div class="sidebar-section-children"><a href="global.html#smartMoveToNearestBase">smartMoveToNearestBase</a></div><div class="sidebar-section-children"><a href="global.html#smartMoveToNearestBaseAndPutDown">smartMoveToNearestBaseAndPutDown</a></div><div class="sidebar-section-children"><a href="global.html#waitForAppReady">waitForAppReady</a></div></div></div><div class="mobile-navbar-actions"><div class="navbar-right-item"><button class="icon-button search-button" aria-label="open-search"><svg><use xlink:href="#search-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button theme-toggle" aria-label="toggle-theme"><svg><use class="theme-svg-use" xlink:href="#light-theme-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button font-size" aria-label="change-font-size"><svg><use xlink:href="#font-size-icon"></use></svg></button></div></div></div></div><script type="text/javascript" src="scripts/core.min.js"></script><script src="scripts/search.min.js" defer="defer"></script><script src="scripts/third-party/fuse.js" defer="defer"></script><script type="text/javascript">var tocbotInstance=tocbot.init({tocSelector:"#eed4d2a0bfd64539bb9df78095dec881",contentSelector:".main-content",headingSelector:"h1, h2, h3",hasInnerContainers:!0,scrollContainer:".main-content",headingsOffset:130,onClick:bringLinkToView})</script></body></html>